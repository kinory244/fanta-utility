
<!DOCTYPE html>
<html lang="it">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Fantacalcio Viewer</title>
<link href="https://cdn.jsdelivr.net/npm/tabulator-tables@6.2.5/dist/css/tabulator.min.css" rel="stylesheet">
<style>
  :root {
    --bg: #0b1020;
    --card: #121a33;
    --text: #e8ecff;
    --muted: #9fb0ff;
    --accent: #7aa2ff;
    --chip: #1a2447;
    --chip-text: #cfe0ff;
    --reconfirm-bg: #0a3d2a33;
    --reconfirm-border: #2bd48a;
  }
  body { margin:0; font-family: system-ui, -apple-system, Segoe UI, Roboto, Ubuntu, Cantarell, 'Helvetica Neue', Arial; background: linear-gradient(180deg, var(--bg), #0d1530); color: var(--text); }
  .wrap { max-width: 1200px; margin: 0 auto; padding: 16px; }
  header { display:flex; gap:12px; align-items:center; justify-content:space-between; flex-wrap:wrap; }
  h1 { font-size: 1.4rem; margin: 0; }
  .controls { display:flex; gap:8px; flex-wrap:wrap; width:100%; margin-top: 8px; }
  .controls select, .controls input { background: var(--card); border: 1px solid #243058; color: var(--text); padding: 10px 12px; border-radius: 12px; outline:none; min-width:150px; }
  .controls button { background: var(--accent); border: none; color: #0a0f20; padding: 10px 14px; border-radius: 12px; font-weight: 700; }
  #legend { margin-top: 10px; }
  .legend-chip { display:inline-flex; align-items:center; gap:8px; padding:8px 10px; border-radius: 10px; background: var(--card); border:1px solid #1a2447; font-size: 0.95rem; }
  .legend-color { width:14px; height:14px; border-radius:4px; background: var(--reconfirm-bg); border: 2px solid var(--reconfirm-border); }
  #table { background: var(--card); border-radius:16px; overflow:hidden; border:1px solid #1a2447; margin-top: 12px; }
  .tabulator { background: transparent; }
  .tabulator-row.reconfirm { background: var(--reconfirm-bg); border-left: 3px solid var(--reconfirm-border); }
  .footer { opacity:.7; font-size:.85rem; padding:12px 0; }
  .col-toggle { display:flex; gap:8px; flex-wrap:wrap; margin-top: 8px; }
  .col-toggle label { background: var(--card); border:1px solid #243058; padding:6px 10px; border-radius:10px; display:inline-flex; align-items:center; gap:6px; }
  @media (max-width: 600px) { .controls select { min-width: 120px; flex:1; } }
</style>
</head>
<body>
<div class="wrap">
  <header><h1>ðŸ“Š Riconferme FantaTaxo</h1></header>
  <header><h3>Vista l'aggiunta di nuovi team e il grado di competitivitÃ  maggiore con 10 squadre, sarÃ  accettata una sola riconferma per squadra per giocatori con cartellino non superiore a 5 crediti. Alle nuove squadre saranno attribuiti 15 crediti extra per sopperire al disequilibrio.</h1></header>

  <section class="controls">
    <select id="ownerFilter"><option value="">Tutti i proprietari</option><option value="Dino">Dino</option><option value="Nicola">Nicola</option><option value="Vannolo">Vannolo</option></select>
    <select id="ruoloFilter"><option value="">Tutti i ruoli</option><option value="A">A</option><option value="C">C</option><option value="D">D</option><option value="P">P</option></select>
    <select id="teamFilter"><option value="">Tutte le squadre (club)</option><option value="ATA">ATA</option><option value="BOL">BOL</option><option value="CAG">CAG</option><option value="COM">COM</option><option value="EMP">EMP</option><option value="FIO">FIO</option><option value="GEN">GEN</option><option value="INT">INT</option><option value="JUV">JUV</option><option value="LAZ">LAZ</option><option value="LEC">LEC</option><option value="MIL">MIL</option><option value="MON">MON</option><option value="NAP">NAP</option><option value="PAR">PAR</option><option value="ROM">ROM</option><option value="TOR">TOR</option><option value="UDI">UDI</option><option value="VEN">VEN</option><option value="VER">VER</option></select>
    <input id="searchBox" type="search" placeholder="Cerca nome giocatoreâ€¦" />
    <button id="resetBtn">Reset filtri</button>
  </section>

  <div id="legend">
    <span class="legend-chip">
      <span class="legend-color"></span>
      Evidenziati = Prezzo d'asta â‰¤ 5 <b>e non Portieri</b> â‡’ potenziale <b>riconferma</b> (a 2Ã— il prezzo d'asta)
    </span>
  </div>

  <div class="col-toggle" id="colToggles"></div>

  <div id="table"></div>

  <p class="footer">Suggerimenti: tocca le intestazioni per ordinare â€¢ Trascina le colonne per riordinarle â€¢ Usa i toggle per mostrare/nascondere colonne.</p>
</div>

<script src="https://cdn.jsdelivr.net/npm/tabulator-tables@6.2.5/dist/js/tabulator.min.js"></script>
<script>
const DATA = [{"Squadra": "Nicola", "Nome": "SVILAR", "Squadra_Appartenenza": "ROM", "Ruolo": "P", "Ruoli_Mantra": "Por", "Prezzo": 31, "Quotazione": 13, "Quotazione_Mantra": 13, "Fantacalcio_Id": 5841}, {"Squadra": "Nicola", "Nome": "FURLANETTO", "Squadra_Appartenenza": "LAZ", "Ruolo": "P", "Ruoli_Mantra": "Por", "Prezzo": 1, "Quotazione": 1, "Quotazione_Mantra": 1, "Fantacalcio_Id": 6417}, {"Squadra": "Nicola", "Nome": "CASALE", "Squadra_Appartenenza": "BOL", "Ruolo": "D", "Ruoli_Mantra": "Dc", "Prezzo": 1, "Quotazione": 8, "Quotazione_Mantra": 8, "Fantacalcio_Id": 5498}, {"Squadra": "Nicola", "Nome": "GATTI", "Squadra_Appartenenza": "JUV", "Ruolo": "D", "Ruoli_Mantra": "Dc", "Prezzo": 5, "Quotazione": 8, "Quotazione_Mantra": 8, "Fantacalcio_Id": 5831}, {"Squadra": "Nicola", "Nome": "MARIPAN", "Squadra_Appartenenza": "TOR", "Ruolo": "D", "Ruoli_Mantra": "Dc", "Prezzo": 1, "Quotazione": 7, "Quotazione_Mantra": 7, "Fantacalcio_Id": 4665}, {"Squadra": "Nicola", "Nome": "LUCUMI'", "Squadra_Appartenenza": "BOL", "Ruolo": "D", "Ruoli_Mantra": "Dc", "Prezzo": 1, "Quotazione": 6, "Quotazione_Mantra": 6, "Fantacalcio_Id": 6042}, {"Squadra": "Nicola", "Nome": "MINA", "Squadra_Appartenenza": "CAG", "Ruolo": "D", "Ruoli_Mantra": "Dc", "Prezzo": 1, "Quotazione": 8, "Quotazione_Mantra": 8, "Fantacalcio_Id": 4210}, {"Squadra": "Nicola", "Nome": "RANIERI L.", "Squadra_Appartenenza": "FIO", "Ruolo": "D", "Ruoli_Mantra": "Dc,Ds", "Prezzo": 1, "Quotazione": 7, "Quotazione_Mantra": 7, "Fantacalcio_Id": 4378}, {"Squadra": "Nicola", "Nome": "EMERSON ROYAL", "Squadra_Appartenenza": "MIL", "Ruolo": "D", "Ruoli_Mantra": "B,Ds,Dd", "Prezzo": 1, "Quotazione": 11, "Quotazione_Mantra": 11, "Fantacalcio_Id": 4816}, {"Squadra": "Nicola", "Nome": "MARUSIC", "Squadra_Appartenenza": "LAZ", "Ruolo": "D", "Ruoli_Mantra": "Ds,Dd,E", "Prezzo": 6, "Quotazione": 6, "Quotazione_Mantra": 7, "Fantacalcio_Id": 2188}, {"Squadra": "Nicola", "Nome": "PARISI", "Squadra_Appartenenza": "FIO", "Ruolo": "D", "Ruoli_Mantra": "Ds,E", "Prezzo": 1, "Quotazione": 8, "Quotazione_Mantra": 8, "Fantacalcio_Id": 5449}, {"Squadra": "Nicola", "Nome": "MORENO ALB.", "Squadra_Appartenenza": "COM", "Ruolo": "D", "Ruoli_Mantra": "Ds,E", "Prezzo": 1, "Quotazione": 6, "Quotazione_Mantra": 6, "Fantacalcio_Id": 5435}, {"Squadra": "Nicola", "Nome": "CALABRIA", "Squadra_Appartenenza": "MIL", "Ruolo": "D", "Ruoli_Mantra": "Dd,E", "Prezzo": 1, "Quotazione": 6, "Quotazione_Mantra": 6, "Fantacalcio_Id": 357}, {"Squadra": "Nicola", "Nome": "GOSENS", "Squadra_Appartenenza": "FIO", "Ruolo": "D", "Ruoli_Mantra": "E", "Prezzo": 44, "Quotazione": 13, "Quotazione_Mantra": 12, "Fantacalcio_Id": 2160}, {"Squadra": "Nicola", "Nome": "ADLI", "Squadra_Appartenenza": "FIO", "Ruolo": "C", "Ruoli_Mantra": "M,C", "Prezzo": 3, "Quotazione": 4, "Quotazione_Mantra": 6, "Fantacalcio_Id": 5875}, {"Squadra": "Nicola", "Nome": "EDERSON D.S.", "Squadra_Appartenenza": "ATA", "Ruolo": "C", "Ruoli_Mantra": "M,C", "Prezzo": 27, "Quotazione": 15, "Quotazione_Mantra": 18, "Fantacalcio_Id": 5792}, {"Squadra": "Nicola", "Nome": "DUNCAN", "Squadra_Appartenenza": "VEN", "Ruolo": "C", "Ruoli_Mantra": "C", "Prezzo": 1, "Quotazione": 8, "Quotazione_Mantra": 8, "Fantacalcio_Id": 526}, {"Squadra": "Nicola", "Nome": "DOUGLAS LUIZ", "Squadra_Appartenenza": "JUV", "Ruolo": "C", "Ruoli_Mantra": "C", "Prezzo": 24, "Quotazione": 20, "Quotazione_Mantra": 19, "Fantacalcio_Id": 4911}, {"Squadra": "Nicola", "Nome": "PAYERO", "Squadra_Appartenenza": "UDI", "Ruolo": "C", "Ruoli_Mantra": "C", "Prezzo": 1, "Quotazione": 8, "Quotazione_Mantra": 7, "Fantacalcio_Id": 6481}, {"Squadra": "Nicola", "Nome": "BARELLA", "Squadra_Appartenenza": "INT", "Ruolo": "C", "Ruoli_Mantra": "C", "Prezzo": 72, "Quotazione": 21, "Quotazione_Mantra": 20, "Fantacalcio_Id": 1870}, {"Squadra": "Nicola", "Nome": "FABBIAN", "Squadra_Appartenenza": "BOL", "Ruolo": "C", "Ruoli_Mantra": "C,T", "Prezzo": 15, "Quotazione": 13, "Quotazione_Mantra": 13, "Fantacalcio_Id": 6206}, {"Squadra": "Nicola", "Nome": "ZACCAGNI", "Squadra_Appartenenza": "LAZ", "Ruolo": "C", "Ruoli_Mantra": "W,A", "Prezzo": 70, "Quotazione": 27, "Quotazione_Mantra": 26, "Fantacalcio_Id": 632}, {"Squadra": "Nicola", "Nome": "KOOPMEINERS", "Squadra_Appartenenza": "JUV", "Ruolo": "C", "Ruoli_Mantra": "T", "Prezzo": 59, "Quotazione": 28, "Quotazione_Mantra": 27, "Fantacalcio_Id": 5685}, {"Squadra": "Nicola", "Nome": "KRSTOVIC", "Squadra_Appartenenza": "LEC", "Ruolo": "A", "Ruoli_Mantra": "Pc", "Prezzo": 5, "Quotazione": 16, "Quotazione_Mantra": 15, "Fantacalcio_Id": 6435}, {"Squadra": "Nicola", "Nome": "PINAMONTI", "Squadra_Appartenenza": "GEN", "Ruolo": "A", "Ruoli_Mantra": "Pc", "Prezzo": 5, "Quotazione": 19, "Quotazione_Mantra": 18, "Fantacalcio_Id": 2038}, {"Squadra": "Nicola", "Nome": "DYBALA", "Squadra_Appartenenza": "ROM", "Ruolo": "A", "Ruoli_Mantra": "A", "Prezzo": 74, "Quotazione": 33, "Quotazione_Mantra": 34, "Fantacalcio_Id": 309}, {"Squadra": "Nicola", "Nome": "YILDIZ", "Squadra_Appartenenza": "JUV", "Ruolo": "A", "Ruoli_Mantra": "A", "Prezzo": 37, "Quotazione": 16, "Quotazione_Mantra": 17, "Fantacalcio_Id": 6434}, {"Squadra": "Dino", "Nome": "LEALI", "Squadra_Appartenenza": "GEN", "Ruolo": "P", "Ruoli_Mantra": "Por", "Prezzo": 1, "Quotazione": 1, "Quotazione_Mantra": 1, "Fantacalcio_Id": 188}, {"Squadra": "Dino", "Nome": "RAVAGLIA F.", "Squadra_Appartenenza": "BOL", "Ruolo": "P", "Ruoli_Mantra": "Por", "Prezzo": 1, "Quotazione": 1, "Quotazione_Mantra": 1, "Fantacalcio_Id": 2722}, {"Squadra": "Dino", "Nome": "BUONGIORNO", "Squadra_Appartenenza": "NAP", "Ruolo": "D", "Ruoli_Mantra": "Dc", "Prezzo": 30, "Quotazione": 16, "Quotazione_Mantra": 16, "Fantacalcio_Id": 2724}, {"Squadra": "Dino", "Nome": "GIGOT", "Squadra_Appartenenza": "LAZ", "Ruolo": "D", "Ruoli_Mantra": "Dc", "Prezzo": 2, "Quotazione": 8, "Quotazione_Mantra": 8, "Fantacalcio_Id": 5899}, {"Squadra": "Dino", "Nome": "N'DICKA", "Squadra_Appartenenza": "ROM", "Ruolo": "D", "Ruoli_Mantra": "Dc", "Prezzo": 11, "Quotazione": 8, "Quotazione_Mantra": 8, "Fantacalcio_Id": 4317}, {"Squadra": "Dino", "Nome": "GASPAR K.", "Squadra_Appartenenza": "LEC", "Ruolo": "D", "Ruoli_Mantra": "Dc", "Prezzo": 1, "Quotazione": 3, "Quotazione_Mantra": 3, "Fantacalcio_Id": 6632}, {"Squadra": "Dino", "Nome": "GILA", "Squadra_Appartenenza": "LAZ", "Ruolo": "D", "Ruoli_Mantra": "Dc", "Prezzo": 4, "Quotazione": 4, "Quotazione_Mantra": 4, "Fantacalcio_Id": 5833}, {"Squadra": "Dino", "Nome": "OLIVERA", "Squadra_Appartenenza": "NAP", "Ruolo": "D", "Ruoli_Mantra": "B,Ds,E", "Prezzo": 12, "Quotazione": 7, "Quotazione_Mantra": 8, "Fantacalcio_Id": 5840}, {"Squadra": "Dino", "Nome": "DANILO", "Squadra_Appartenenza": "JUV", "Ruolo": "D", "Ruoli_Mantra": "B,Ds,Dd", "Prezzo": 8, "Quotazione": 13, "Quotazione_Mantra": 15, "Fantacalcio_Id": 4237}, {"Squadra": "Dino", "Nome": "TAVARES N.", "Squadra_Appartenenza": "LAZ", "Ruolo": "D", "Ruoli_Mantra": "Ds,E", "Prezzo": 4, "Quotazione": 6, "Quotazione_Mantra": 6, "Fantacalcio_Id": 5620}, {"Squadra": "Dino", "Nome": "ABDULHAMID", "Squadra_Appartenenza": "ROM", "Ruolo": "D", "Ruoli_Mantra": "Dd,E", "Prezzo": 1, "Quotazione": 5, "Quotazione_Mantra": 5, "Fantacalcio_Id": 6885}, {"Squadra": "Dino", "Nome": "TCHATCHOUA", "Squadra_Appartenenza": "VER", "Ruolo": "D", "Ruoli_Mantra": "Dd,E", "Prezzo": 5, "Quotazione": 6, "Quotazione_Mantra": 6, "Fantacalcio_Id": 6480}, {"Squadra": "Dino", "Nome": "DODO'", "Squadra_Appartenenza": "FIO", "Ruolo": "D", "Ruoli_Mantra": "Dd,E", "Prezzo": 7, "Quotazione": 9, "Quotazione_Mantra": 9, "Fantacalcio_Id": 5885}, {"Squadra": "Dino", "Nome": "PEDERSEN", "Squadra_Appartenenza": "TOR", "Ruolo": "D", "Ruoli_Mantra": "E", "Prezzo": 1, "Quotazione": 6, "Quotazione_Mantra": 5, "Fantacalcio_Id": 6426}, {"Squadra": "Dino", "Nome": "TAMEZE", "Squadra_Appartenenza": "TOR", "Ruolo": "C", "Ruoli_Mantra": "M,C", "Prezzo": 1, "Quotazione": 5, "Quotazione_Mantra": 6, "Fantacalcio_Id": 4890}, {"Squadra": "Dino", "Nome": "PAREDES", "Squadra_Appartenenza": "ROM", "Ruolo": "C", "Ruoli_Mantra": "M,C", "Prezzo": 4, "Quotazione": 6, "Quotazione_Mantra": 7, "Fantacalcio_Id": 468}, {"Squadra": "Dino", "Nome": "KONE' M.", "Squadra_Appartenenza": "ROM", "Ruolo": "C", "Ruoli_Mantra": "M,C", "Prezzo": 13, "Quotazione": 8, "Quotazione_Mantra": 9, "Fantacalcio_Id": 5589}, {"Squadra": "Dino", "Nome": "FOFANA Y.", "Squadra_Appartenenza": "MIL", "Ruolo": "C", "Ruoli_Mantra": "M,C", "Prezzo": 4, "Quotazione": 7, "Quotazione_Mantra": 8, "Fantacalcio_Id": 4686}, {"Squadra": "Dino", "Nome": "REIJNDERS", "Squadra_Appartenenza": "MIL", "Ruolo": "C", "Ruoli_Mantra": "C", "Prezzo": 8, "Quotazione": 12, "Quotazione_Mantra": 11, "Fantacalcio_Id": 6224}, {"Squadra": "Dino", "Nome": "GUENDOUZI", "Squadra_Appartenenza": "LAZ", "Ruolo": "C", "Ruoli_Mantra": "C", "Prezzo": 10, "Quotazione": 10, "Quotazione_Mantra": 9, "Fantacalcio_Id": 4186}, {"Squadra": "Dino", "Nome": "LOVRIC", "Squadra_Appartenenza": "UDI", "Ruolo": "C", "Ruoli_Mantra": "C", "Prezzo": 1, "Quotazione": 10, "Quotazione_Mantra": 10, "Fantacalcio_Id": 5850}, {"Squadra": "Dino", "Nome": "LE FEE", "Squadra_Appartenenza": "ROM", "Ruolo": "C", "Ruoli_Mantra": "C,T", "Prezzo": 1, "Quotazione": 10, "Quotazione_Mantra": 10, "Fantacalcio_Id": 6299}, {"Squadra": "Dino", "Nome": "TCHAOUNA", "Squadra_Appartenenza": "LAZ", "Ruolo": "C", "Ruoli_Mantra": "W", "Prezzo": 2, "Quotazione": 9, "Quotazione_Mantra": 9, "Fantacalcio_Id": 5919}, {"Squadra": "Dino", "Nome": "SAELEMAEKERS", "Squadra_Appartenenza": "ROM", "Ruolo": "C", "Ruoli_Mantra": "W", "Prezzo": 1, "Quotazione": 5, "Quotazione_Mantra": 5, "Fantacalcio_Id": 4892}, {"Squadra": "Dino", "Nome": "SAMARDZIC", "Squadra_Appartenenza": "ATA", "Ruolo": "C", "Ruoli_Mantra": "T", "Prezzo": 13, "Quotazione": 17, "Quotazione_Mantra": 16, "Fantacalcio_Id": 5119}, {"Squadra": "Dino", "Nome": "MORATA", "Squadra_Appartenenza": "MIL", "Ruolo": "A", "Ruoli_Mantra": "Pc", "Prezzo": 62, "Quotazione": 26, "Quotazione_Mantra": 26, "Fantacalcio_Id": 313}, {"Squadra": "Dino", "Nome": "DALLINGA", "Squadra_Appartenenza": "BOL", "Ruolo": "A", "Ruoli_Mantra": "Pc", "Prezzo": 6, "Quotazione": 21, "Quotazione_Mantra": 20, "Fantacalcio_Id": 6643}, {"Squadra": "Dino", "Nome": "CASTELLANOS", "Squadra_Appartenenza": "LAZ", "Ruolo": "A", "Ruoli_Mantra": "Pc", "Prezzo": 40, "Quotazione": 22, "Quotazione_Mantra": 22, "Fantacalcio_Id": 6226}, {"Squadra": "Dino", "Nome": "KEAN", "Squadra_Appartenenza": "FIO", "Ruolo": "A", "Ruoli_Mantra": "Pc", "Prezzo": 36, "Quotazione": 20, "Quotazione_Mantra": 20, "Fantacalcio_Id": 2097}, {"Squadra": "Dino", "Nome": "KVARATSKHELIA", "Squadra_Appartenenza": "NAP", "Ruolo": "A", "Ruoli_Mantra": "A", "Prezzo": 106, "Quotazione": 30, "Quotazione_Mantra": 31, "Fantacalcio_Id": 5839}, {"Squadra": "Dino", "Nome": "LOOKMAN", "Squadra_Appartenenza": "ATA", "Ruolo": "A", "Ruoli_Mantra": "A", "Prezzo": 80, "Quotazione": 27, "Quotazione_Mantra": 28, "Fantacalcio_Id": 4730}, {"Squadra": "Dino", "Nome": "MOTA", "Squadra_Appartenenza": "MON", "Ruolo": "A", "Ruoli_Mantra": "A", "Prezzo": 5, "Quotazione": 9, "Quotazione_Mantra": 9, "Fantacalcio_Id": 5882}, {"Squadra": "Vannolo", "Nome": "MILINKOVIC-SAVIC V.", "Squadra_Appartenenza": "TOR", "Ruolo": "P", "Ruoli_Mantra": "Por", "Prezzo": 4, "Quotazione": 12, "Quotazione_Mantra": 12, "Fantacalcio_Id": 2170}, {"Squadra": "Vannolo", "Nome": "SAVA", "Squadra_Appartenenza": "UDI", "Ruolo": "P", "Ruoli_Mantra": "Por", "Prezzo": 2, "Quotazione": 1, "Quotazione_Mantra": 1, "Fantacalcio_Id": 6842}, {"Squadra": "Vannolo", "Nome": "CORVI", "Squadra_Appartenenza": "PAR", "Ruolo": "P", "Ruoli_Mantra": "Por", "Prezzo": 3, "Quotazione": 1, "Quotazione_Mantra": 1, "Fantacalcio_Id": 6662}, {"Squadra": "Vannolo", "Nome": "PONGRACIC", "Squadra_Appartenenza": "FIO", "Ruolo": "D", "Ruoli_Mantra": "Dc", "Prezzo": 4, "Quotazione": 8, "Quotazione_Mantra": 8, "Fantacalcio_Id": 5603}, {"Squadra": "Vannolo", "Nome": "ISMAJLI", "Squadra_Appartenenza": "EMP", "Ruolo": "D", "Ruoli_Mantra": "Dc", "Prezzo": 1, "Quotazione": 7, "Quotazione_Mantra": 7, "Fantacalcio_Id": 5010}, {"Squadra": "Vannolo", "Nome": "COPPOLA D.", "Squadra_Appartenenza": "VER", "Ruolo": "D", "Ruoli_Mantra": "Dc", "Prezzo": 1, "Quotazione": 4, "Quotazione_Mantra": 4, "Fantacalcio_Id": 5764}, {"Squadra": "Vannolo", "Nome": "BIJOL", "Squadra_Appartenenza": "UDI", "Ruolo": "D", "Ruoli_Mantra": "Dc", "Prezzo": 5, "Quotazione": 9, "Quotazione_Mantra": 9, "Fantacalcio_Id": 5847}, {"Squadra": "Vannolo", "Nome": "ROMAGNOLI", "Squadra_Appartenenza": "LAZ", "Ruolo": "D", "Ruoli_Mantra": "Dc", "Prezzo": 5, "Quotazione": 10, "Quotazione_Mantra": 10, "Fantacalcio_Id": 460}, {"Squadra": "Vannolo", "Nome": "DJIMSITI", "Squadra_Appartenenza": "ATA", "Ruolo": "D", "Ruoli_Mantra": "Dc", "Prezzo": 1, "Quotazione": 8, "Quotazione_Mantra": 8, "Fantacalcio_Id": 787}, {"Squadra": "Vannolo", "Nome": "HIEN", "Squadra_Appartenenza": "ATA", "Ruolo": "D", "Ruoli_Mantra": "Dc", "Prezzo": 5, "Quotazione": 8, "Quotazione_Mantra": 8, "Fantacalcio_Id": 6046}, {"Squadra": "Vannolo", "Nome": "BANI", "Squadra_Appartenenza": "GEN", "Ruolo": "D", "Ruoli_Mantra": "Dc", "Prezzo": 3, "Quotazione": 7, "Quotazione_Mantra": 7, "Fantacalcio_Id": 2285}, {"Squadra": "Vannolo", "Nome": "VASQUEZ", "Squadra_Appartenenza": "GEN", "Ruolo": "D", "Ruoli_Mantra": "Dc,Ds", "Prezzo": 6, "Quotazione": 9, "Quotazione_Mantra": 10, "Fantacalcio_Id": 5514}, {"Squadra": "Vannolo", "Nome": "MIRANDA J.", "Squadra_Appartenenza": "BOL", "Ruolo": "D", "Ruoli_Mantra": "Ds,E", "Prezzo": 3, "Quotazione": 8, "Quotazione_Mantra": 8, "Fantacalcio_Id": 4734}, {"Squadra": "Vannolo", "Nome": "KYRIAKOPOULOS", "Squadra_Appartenenza": "MON", "Ruolo": "D", "Ruoli_Mantra": "Ds,E", "Prezzo": 1, "Quotazione": 7, "Quotazione_Mantra": 7, "Fantacalcio_Id": 4530}, {"Squadra": "Vannolo", "Nome": "RUGGERI", "Squadra_Appartenenza": "ATA", "Ruolo": "D", "Ruoli_Mantra": "E", "Prezzo": 10, "Quotazione": 12, "Quotazione_Mantra": 11, "Fantacalcio_Id": 5354}, {"Squadra": "Vannolo", "Nome": "SOSA B.", "Squadra_Appartenenza": "TOR", "Ruolo": "D", "Ruoli_Mantra": "E", "Prezzo": 2, "Quotazione": 7, "Quotazione_Mantra": 6, "Fantacalcio_Id": 6820}, {"Squadra": "Vannolo", "Nome": "FREULER", "Squadra_Appartenenza": "BOL", "Ruolo": "C", "Ruoli_Mantra": "M,C", "Prezzo": 8, "Quotazione": 10, "Quotazione_Mantra": 11, "Fantacalcio_Id": 788}, {"Squadra": "Vannolo", "Nome": "PESSINA", "Squadra_Appartenenza": "MON", "Ruolo": "C", "Ruoli_Mantra": "M,C", "Prezzo": 15, "Quotazione": 11, "Quotazione_Mantra": 12, "Fantacalcio_Id": 2741}, {"Squadra": "Vannolo", "Nome": "BRESCIANINI", "Squadra_Appartenenza": "ATA", "Ruolo": "C", "Ruoli_Mantra": "M,C", "Prezzo": 8, "Quotazione": 7, "Quotazione_Mantra": 8, "Fantacalcio_Id": 4947}, {"Squadra": "Vannolo", "Nome": "BADELJ", "Squadra_Appartenenza": "GEN", "Ruolo": "C", "Ruoli_Mantra": "M,C", "Prezzo": 1, "Quotazione": 7, "Quotazione_Mantra": 7, "Fantacalcio_Id": 170}, {"Squadra": "Vannolo", "Nome": "BERNABE'", "Squadra_Appartenenza": "PAR", "Ruolo": "C", "Ruoli_Mantra": "C,T", "Prezzo": 21, "Quotazione": 14, "Quotazione_Mantra": 14, "Fantacalcio_Id": 6666}, {"Squadra": "Vannolo", "Nome": "FRATTESI", "Squadra_Appartenenza": "INT", "Ruolo": "C", "Ruoli_Mantra": "C,T", "Prezzo": 20, "Quotazione": 18, "Quotazione_Mantra": 17, "Fantacalcio_Id": 2848}, {"Squadra": "Vannolo", "Nome": "POLITANO", "Squadra_Appartenenza": "NAP", "Ruolo": "C", "Ruoli_Mantra": "W", "Prezzo": 6, "Quotazione": 23, "Quotazione_Mantra": 22, "Fantacalcio_Id": 536}, {"Squadra": "Vannolo", "Nome": "NDOYE", "Squadra_Appartenenza": "BOL", "Ruolo": "C", "Ruoli_Mantra": "W", "Prezzo": 4, "Quotazione": 10, "Quotazione_Mantra": 9, "Fantacalcio_Id": 5564}, {"Squadra": "Vannolo", "Nome": "SOULE'", "Squadra_Appartenenza": "ROM", "Ruolo": "A", "Ruoli_Mantra": "W,A", "Prezzo": 40, "Quotazione": 19, "Quotazione_Mantra": 21, "Fantacalcio_Id": 5734}, {"Squadra": "Vannolo", "Nome": "GAETANO", "Squadra_Appartenenza": "CAG", "Ruolo": "C", "Ruoli_Mantra": "T", "Prezzo": 8, "Quotazione": 8, "Quotazione_Mantra": 7, "Fantacalcio_Id": 4364}, {"Squadra": "Vannolo", "Nome": "RETEGUI", "Squadra_Appartenenza": "ATA", "Ruolo": "A", "Ruoli_Mantra": "Pc", "Prezzo": 88, "Quotazione": 23, "Quotazione_Mantra": 22, "Fantacalcio_Id": 6228}, {"Squadra": "Vannolo", "Nome": "POHJANPALO", "Squadra_Appartenenza": "VEN", "Ruolo": "A", "Ruoli_Mantra": "Pc", "Prezzo": 4, "Quotazione": 15, "Quotazione_Mantra": 14, "Fantacalcio_Id": 5079}, {"Squadra": "Vannolo", "Nome": "VLAHOVIC", "Squadra_Appartenenza": "JUV", "Ruolo": "A", "Ruoli_Mantra": "Pc", "Prezzo": 176, "Quotazione": 38, "Quotazione_Mantra": 39, "Fantacalcio_Id": 2841}, {"Squadra": "Vannolo", "Nome": "COLOMBO", "Squadra_Appartenenza": "EMP", "Ruolo": "A", "Ruoli_Mantra": "Pc", "Prezzo": 4, "Quotazione": 13, "Quotazione_Mantra": 12, "Fantacalcio_Id": 4923}, {"Squadra": "Vannolo", "Nome": "LUVUMBO", "Squadra_Appartenenza": "CAG", "Ruolo": "A", "Ruoli_Mantra": "A", "Prezzo": 8, "Quotazione": 12, "Quotazione_Mantra": 12, "Fantacalcio_Id": 5297}, {"Squadra": "Vannolo", "Nome": "ADAMS C.", "Squadra_Appartenenza": "TOR", "Ruolo": "A", "Ruoli_Mantra": "A", "Prezzo": 21, "Quotazione": 16, "Quotazione_Mantra": 16, "Fantacalcio_Id": 6646}, {"Squadra": "Vannolo", "Nome": "GONZALEZ N.", "Squadra_Appartenenza": "JUV", "Ruolo": "A", "Ruoli_Mantra": "A", "Prezzo": 10, "Quotazione": 24, "Quotazione_Mantra": 25, "Fantacalcio_Id": 4179}];
const fmt0 = (n) => new Intl.NumberFormat('it-IT', { maximumFractionDigits: 0 }).format(n);

const columns = [
  { key:"Squadra", title: "Proprietario", field: "Squadra", widthGrow: 1, visible: true },
  { key:"Nome", title: "Nome", field: "Nome", widthGrow: 2, visible: true },
  { key:"Club", title: "Club", field: "Squadra_Appartenenza", widthGrow: 1, visible: true },
  { key:"Ruolo", title: "Ruolo", field: "Ruolo", widthGrow: 1, visible: false },
  { key:"Ruoli_Mantra", title: "Ruoli Mantra", field: "Ruoli_Mantra", widthGrow: 1.2, visible: true },
  { key:"Prezzo", title: "Prezzo", field: "Prezzo", hozAlign:"right", widthGrow: 1, formatter:(cell)=>fmt0(cell.getValue()), visible: true },
  { key:"Quot", title: "Quot.", field: "Quotazione", hozAlign:"right", widthGrow: 1, visible: false },
  { key:"QuotM", title: "Quot. Mantra", field: "Quotazione_Mantra", hozAlign:"right", widthGrow: 1, visible: false },
  { key:"Riconferma", title: "Riconferma (2Ã—)", field: "Prezzo", hozAlign:"right", widthGrow: 1,
    formatter:(cell)=>{ const d = cell.getRow().getData(); const v = Number(d.Prezzo); return (v<=5 && d.Ruolo!=="P") ? fmt0(v*2) : "â€”"; }, visible: true },
  { key:"ID", title: "ID", field: "Fantacalcio_Id", visible:false }
];

let table = new Tabulator("#table", {
  data: DATA,
  layout: "fitColumns",
  responsiveLayout: "collapse",
  movableColumns: true,
  height: "75vh",
  columns: columns,
  rowFormatter: function(row){
    const d = row.getData();
    const isReconfirm = Number(d.Prezzo) <= 5 && d.Ruolo !== "P";
    row.getElement().classList.toggle("reconfirm", isReconfirm);
  }
});

// Column toggles
const colToggles = document.getElementById("colToggles");
columns.forEach(col => {
  if (col.key === "ID") return;
  const id = "chk_" + col.key;
  const label = document.createElement("label");
  const input = document.createElement("input");
  input.type = "checkbox";
  input.id = id;
  input.checked = !!col.visible;
  input.addEventListener("change", () => {
    (input.checked ? table.showColumn(col.field) : table.hideColumn(col.field));
  });
  label.appendChild(input);
  label.appendChild(document.createTextNode(" " + col.title));
  colToggles.appendChild(label);
});
columns.forEach(col => { if (col.visible === false) table.hideColumn(col.field); });

// Filters
const ownerFilter = document.getElementById("ownerFilter");
const ruoloFilter = document.getElementById("ruoloFilter");
const teamFilter = document.getElementById("teamFilter");
const searchBox = document.getElementById("searchBox");
const resetBtn = document.getElementById("resetBtn");

function applyFilters() {
  let filters = [];
  if (ownerFilter.value) filters.push({ field:"Squadra", type:"=", value: ownerFilter.value });
  if (ruoloFilter.value) filters.push({ field:"Ruolo", type:"=", value: ruoloFilter.value });
  if (teamFilter.value) filters.push({ field:"Squadra_Appartenenza", type:"=", value: teamFilter.value });

  table.clearFilter(true);
  if (filters.length) table.setFilter(filters);
  if (searchBox.value) {
    const q = searchBox.value.toLowerCase();
    table.addFilter((data) => (data.Nome || '').toLowerCase().includes(q));
  }
}

ownerFilter.addEventListener("change", applyFilters);
ruoloFilter.addEventListener("change", applyFilters);
teamFilter.addEventListener("change", applyFilters);
searchBox.addEventListener("input", applyFilters);
resetBtn.addEventListener("click", () => {
  ownerFilter.value = "";
  ruoloFilter.value = "";
  teamFilter.value = "";
  searchBox.value = "";
  table.clearFilter(true);
});
</script>
</body>
</html>
